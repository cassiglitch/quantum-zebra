<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ninjago Fighting Game</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000;
        }

        #game-container {
            position: relative;
            width: 800px;
            height: 400px;
            background-color: #f0f0f0;
            border: 2px solid #333;
        }

        canvas {
            display: block;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="ninjagoCanvas" width="800" height="400"></canvas>
    </div>
    <script>
        const canvas = document.getElementById('ninjagoCanvas');
        const ctx = canvas.getContext('2d');

        const jayImage = new Image();
        const kaiImage = new Image();
        jayImage.src = '/mnt/data/IMG_5353.png';  // Use the uploaded image for Jay
        kaiImage.src = 'https://example.com/path-to-kai-image.png';  // Replace with actual path for Kai's image

        const characters = {
            jay: { x: 100, y: 300, width: 50, height: 50, state: 'idle', frame: 0 },
            kai: { x: 600, y: 300, width: 50, height: 50, state: 'idle', frame: 0 }
        };

        let keys = {};

        function drawCharacter(character, image) {
            ctx.drawImage(image, character.x, character.y, character.width, character.height);
        }

        function updateCharacter(character) {
            switch (character.state) {
                case 'idle':
                    // Idle state logic
                    break;
                case 'walking':
                    character.x += 2;
                    break;
                case 'punching':
                    // Punching logic
                    break;
                case 'spinjitzu':
                    character.frame += 1;
                    character.x += Math.sin(character.frame * 0.1) * 2;
                    break;
                case 'jump':
                    character.y -= Math.sin(character.frame * 0.1) * 5;
                    break;
                case 'lightning':
                    // Lightning logic
                    break;
                case 'fire':
                    // Fire logic
                    break;
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let characterKey in characters) {
                updateCharacter(characters[characterKey]);
                drawCharacter(characters[characterKey], characterKey === 'jay' ? jayImage : kaiImage);
            }

            requestAnimationFrame(animate);
        }

        document.addEventListener('keydown', (event) => {
            keys[event.key] = true;
            handleInput();
        });

        document.addEventListener('keyup', (event) => {
            keys[event.key] = false;
        });

        function handleInput() {
            if (keys['ArrowRight']) characters.jay.state = 'walking';
            else if (keys['ArrowUp']) characters.jay.state = 'jump';
            else if (keys['p']) characters.jay.state = 'punching';
            else if (keys['s']) characters.jay.state = 'spinjitzu';
            else if (keys['l']) characters.jay.state = 'lightning';
            else characters.jay.state = 'idle';
        }

        function aiLogic() {
            const kai = characters.kai;
            const jay = characters.jay;

            // Simple AI logic for Kai
            if (kai.x > jay.x + 50) {
                kai.state = 'walking';
                kai.x -= 2;
            } else if (kai.x < jay.x - 50) {
                kai.state = 'walking';
                kai.x += 2;
            } else {
                kai.state = 'punching';
            }

            setTimeout(aiLogic, 1000 / 30);  // 30 times per second
        }

        jayImage.onload = function() {
            kaiImage.onload = function() {
                animate();
                aiLogic();
            };
        };
    </script>
</body>
</html>
